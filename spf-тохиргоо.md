# Microsoft 365 ашиглаж буй үед spoofing имэйлээс сэргийлэхийн тулд Sender Policy Framework (SPF) хэрхэн тохируулах вэ? 

 **Дүгнэлт:** Энэхүү нийтлэл нь Microsoft 365 нь DNS дээрх Sender Policy Framework (SPF) TXT бичлэгийг ашиглан таны имэйлийн домайнаас илгээсэн мэйл нь имэйл илгээгч дээр найдвартай зөв эсэхийг баталгаажуулах тохиргоог хэрхэн хийх талаар танилцуулах юм. Энэ нь Microsoft 365-аас илгээсэн гадагш ирсэн мэйлд хамаатай. Microsoft 365-аас Microsoft 365 доторх хүлээн авагчид илгээсэн имэйлүүд үргэлж SPF дамжуулдаг.

SPF TXT бичлэг нь имэйлийн илгээгч домайн нэрийг баталгаажуулах замаар хуурамч имэйл, фишинг халдлагаас урьдчилан сэргийлэхэд тусалдаг DNS бичлэг юм. SPF нь илгээгч домайн эзэмшигчийн илгээгчийн IP хаягийг баталгаажуулах замаар имэйлийн имэйлийн гарал үүслийг баталгаажуулдаг.


##  SPF TXT бичлэг үүсгэх, өөрчлөх

1. Дараах хүснэгтэд SPF синтакстай тохирч байгаа эсэхээ шалгаарай..

   ****

   |№|Систем ашиглаж байвал|Нийтлэг эсэх?|Нэмэх|
   |---|---|---|---|
   |1|Бүх имэйл систем (шаардлагатай)|Common. Бүх SPF TXT бичлэгүүд энэ утгаас эхэлнэ|`v=spf1`|
   |2|Exchange Online|Нийтлэг|`include:spf.protection.outlook.com`|
   |3|Exchange Online dedicated only|Нийтлэг биш|`ip4:23.103.224.0/19` <br> `ip4:206.191.224.0/19` <br> `ip4:40.103.0.0/16` <br> `include:spf.protection.outlook.com`|
   |4|Жишээ Office 365 Germany, Microsoft Cloud Germany|Нийтлэг биш|`include:spf.protection.outlook.de`|
   |5|Third-party email system|Нийтлэг биш|`include:<domain_name>` <p> \<domain_name\> is the domain of the third party email system.|
   |6|On-premises email system. Жишээ, Exchange Online Protection болон өөр бусад имэйл систем|Нийтлэг биш|Нэмэлт имэйл сервер болгон дээр: <p> `ip4:<IP_address>` <br> `ip6:<IP_address>` <br> `include:<domain_name>` <p> \<IP_address\> and \<domain_name\> дараах IP болон and домайнууд нь таны өмнөөс имэйл илгээх боломжтой гэж ойлгоно.
   |7|Бүх имэйл систем (шаардлагатай)|Common. Бүх SPF TXT бичлэгүүд энэ утгаар төгсдөг|`<enforcement rule>` <p> Энэ нь хэд хэдэн утгатай байж болно. Дараах утгыг танд санал болгож байна `-all`.|
   |

2. Хэрэв та SPF TXT record тохируулаагүй бол  хүснэгтээс синтакс ашиглан SPF TXT бичлэгээ бүрдүүлнэ үү.

   Жишээлбэл, хэрэв та Office 365 дээр бүрэн байршуулсан бол, өөрөөр хэлбэл танд дотоод имэйл сервер байхгүй бол таны SPF TXT бичлэг нь 1, 2, 7-р мөрүүдийг агуулсан байх бөгөөд дараах байдалтай байна.

   ```text
   v=spf1 include:spf.protection.outlook.com -all
   ```

    Энэ бол хамгийн нийтлэг SPF TXT бичлэг юм. Энэ бичлэг нь таны Microsoft мэдээллийн төв АНУ, эсвэл Европт (Герман орно) эсвэл өөр газар байрласан эсэхээс үл хамааран бараг бүх хүнд үйлчилдэг.
 

3. SPF TXT бичлэгээ бүрдүүлсний дараа DNS дээрх бичлэгийг шинэчлэх шаардлагатай. Танд домэйны хувьд зөвхөн нэг SPF TXT бичлэг байх боломжтой. Хэрэв SPF TXT бичлэг байгаа бол шинэ бичлэгээр шинэчлэх хэрэгтэй. 

4. SPF TXT бичлэгээ туршиж үзээрэй.

### SPF тохироо: Имэйл серверийн IP хаягийг зөвшөөрөгдсөн домайн дээр тохируулах 
<a name="SPFBasicsIPaddresses"> </a>

SPF дүрмийн үндсэн синтакс: 

v=spf1 \<IP\> \<enforcement rule\>

Жишээлбэл, mongol.com-д дараах SPF дүрэм байдаг гэж үзье.

v=spf1 \<IP address #1\> \<IP address #2\> \<IP address #3\> \<enforcement rule\>

Энэ жишээ дээр, SPF дүрмээр хүлээн авагч имэйлийн серверт зөвхөн эдгээр IP хаягаас mongol.com домэйны мэйл хүлээн авахыг зааж өгдөг.

- IP address #1

- IP address #2

- IP address #3

Энэхүү SPF дүрмээр хүлээн авч буй имэйлийн серверт эдгээр гурван IP хаягийн аль нэгээс биш mongol.com-аас имэйл ирсэн тохиолдолд хүлээн авагч сервер дээр enforcement дүрэм ажиллана. Encforcement нь ихэвчлэн эдгээр хувилбаруудын нэг байдаг.

- **Hard fail.** Имэйлийг 'hard fail' гэж тэмдэглээд дараа нь энэ төрлийн имэйл хүлээн авах сервер нь спам гэж үздэг.
- **Soft fail.** Имэйлийг 'soft fail' гэж тэмдэглээд дараа нь энэ төрлйин имэйл хүлээн авах сервер нь ямар ч тохиолдолд имэйлийг хүлээн авна. 
- **Neutral.** Имэйлийг тэмдэглэж болохгүй. Энэ нь ихэвчлэн туршилтын зорилгоор хэрэглэгддэг.
